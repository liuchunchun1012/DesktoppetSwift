# DesktoppetSwift 使用说明 🐱

一个可爱的、由 AI 驱动的 macOS 桌面宠物！

**✅ 通用版本**：同时支持 Intel Mac 和 Apple Silicon (M1/M2/M3) Mac

## 📦 安装步骤

### 1. 解压应用
- 下载 `DesktoppetSwift-Universal.zip`
- 双击解压，得到 `DesktoppetSwift.app`
- 拖拽到「应用程序」文件夹（可选，也可以放在任意位置）

### 2. 首次运行
- 双击 `DesktoppetSwift.app` 打开
- ⚠️ 如果 macOS 提示「无法打开」：
  1. 打开「系统设置」→「隐私与安全性」
  2. 找到「仍要打开」按钮，点击确认
  3. 再次打开应用

### 3. 配置 AI 服务

应用支持多种 AI 服务，选择其中一种即可：

#### 选项 A：本地 Ollama（推荐新手，完全免费）

1. **安装 Ollama**
   ```bash
   # 访问 https://ollama.ai 下载安装
   # 或使用 Homebrew
   brew install ollama
   ```

2. **启动 Ollama 服务**
   ```bash
   ollama serve
   ```

3. **下载模型**（新开一个终端窗口）
   ```bash
   # 推荐使用 Gemma3 模型（支持视觉）
   ollama pull gemma3:12b-it-qat

   # 或者更小的模型（占用更少内存）
   ollama pull gemma3:4b-it-qat
   ```

4. **在应用中配置**
   - 点击菜单栏的猫头图标 → 「⚙️ 设置」
   - 「AI 提供商」选择「Ollama (本地)」
   - 模型选择刚才下载的模型

#### 选项 B：Claude（Anthropic）

1. 获取 API Key：https://console.anthropic.com/
2. 在应用设置中：
   - 选择「Claude (Anthropic)」
   - 输入 API Key
   - 选择模型（推荐：claude-sonnet-4.5-20250929）

#### 选项 C：OpenAI

1. 获取 API Key：https://platform.openai.com/
2. 在应用设置中：
   - 选择「OpenAI」
   - 输入 API Key
   - 选择模型（推荐：gpt-4o）

#### 选项 D：Google Gemini

1. 获取 API Key：https://aistudio.google.com/
2. 在应用设置中：
   - 选择「Google Gemini」
   - 输入 API Key
   - 选择模型（推荐：gemini-2.0-flash）

#### 选项 E：通义千问 (Qwen)

1. 获取 API Key：https://dashscope.aliyun.com/
2. 在应用设置中：
   - 选择「通义千问 (Qwen)」
   - 输入 API Key
   - 选择模型（推荐：qwen3-max）

---

## 🎮 使用方法

### 基础操作
- **拖拽**：移动宠物位置
- **点击**：触发跳跃动画
- **菜单栏图标**：更多功能和设置

### 快捷键（重要！）

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `⌘⌃⇧J` | 聊天 | 打开输入框，和宠物聊天 |
| `⌘⌃⇧T` | 翻译 | 先复制文字，按快捷键翻译 |
| `⌘⌃⇧L` | 图片分析 | 先截图或复制图片，再按快捷键提问 |

**提示**：`⌘` = Command，`⌃` = Control，`⇧` = Shift

### 聊天功能
1. 按 `⌘⌃⇧J` 打开聊天框
2. 输入内容，按回车
3. 宠物会用 AI 回复你
4. 支持上下文追问（记住最近 20 轮对话）

### 翻译功能
1. 选中任意文字，按 `⌘C` 复制
2. 按 `⌘⌃⇧T` 快捷键
3. 宠物会显示翻译结果
4. 可在菜单栏「🔄 翻译目标」切换语言（中/英/日/韩）

### 图片分析（需要支持视觉的模型）
1. 截图或复制图片到剪贴板
2. 按 `⌘⌃⇧L` 快捷键
3. 输入问题（如「这是什么？」「帮我看看这段代码」）
4. 宠物会结合图片内容回答

---

## ⚙️ 个性化设置

### 1. 宠物信息
在「设置 → 系统提示词」中可以设置：
- 宠物全名
- 宠物小名
- 主人名称

### 2. AI 性格
在「设置 → 系统提示词」中可以自定义：
- 文本对话提示词（定义宠物性格）
- 图片分析提示词

支持占位符：
- `{petName}` - 宠物全名
- `{petNickname}` - 宠物小名
- `{ownerName}` - 主人名称

### 3. 翻译语言
在「设置 → 语言」或菜单栏「🔄 翻译目标」中选择：
- 中文
- English
- 日本語
- 한국어

---

## 🐛 常见问题

### 快捷键没反应？
- 确认应用正在运行（菜单栏有猫头图标）
- 检查是否和其他应用快捷键冲突

### 宠物不说话？
- **使用 Ollama**：确认 Ollama 服务正在运行
  ```bash
  # 测试 Ollama
  curl http://localhost:11434/api/tags

  # 没响应就启动
  ollama serve
  ```
- **使用其他 AI**：检查 API Key 是否正确，网络是否通畅

### 截图分析不工作？
需要使用支持视觉的模型：
- **Ollama**：`gemma3:12b-it-qat`
- **Claude**：所有 Claude 模型都支持
- **OpenAI**：`gpt-4o`, `gpt-4o-mini`
- **Gemini**：所有 Gemini 模型都支持
- **Qwen**：`qwen3-vl-plus`, `qwen-vl-max`

### 如何卸载？
直接删除 `DesktoppetSwift.app` 即可

---

## 💡 温馨提示

1. **首次使用 Ollama 推荐**：完全免费，隐私安全，但需要下载模型（约 8GB）
2. **网络 API 更快**：Claude、OpenAI、Gemini 响应更快，但需要 API Key 和网络
3. **记忆功能**：宠物会记住最近 20 轮对话，可以在菜单栏点击「💬 和我聊天」清空记忆
4. **性能优化**：使用 QAT 量化模型（如 `gemma3:12b-it-qat`）可以更快更省资源

---

## 📞 获取帮助

- **GitHub 项目**：https://github.com/liuchunchun1012/DesktoppetSwift
- **问题反馈**：https://github.com/liuchunchun1012/DesktoppetSwift/issues
- **开发者**：硫醇醇

---

**祝使用愉快！🐱**
